<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <link rel="stylesheet" href="./minim.css">
  <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/minim0/assets/minim.png" type="image/x-icon">
  <title>minim notes: Nimiq QR Scanner</title>
</head>
<body>
  <div class="pad20">
    <div id="video-container">
      <video id="qr-video" class="box"></video>
    </div>
    <div class="row2">
      <button onclick="qrScanner.start();">start</button>
      <button onclick="qrScanner.stop();">stop</button>
    </div>
    <div>
      <input type="file" id="scanFile" onchange="scanFile();">
    </div>
    <span class="title">Cam Scan Result:</span>
    <div id="cam-qr-result" class="box"></div>

    <span class="title">File Scan Result:</span>
    <div id="file-qr-result" class="box">
    </div>    
  </div>



<script src="./js/qr-scanner.umd.min.js"></script>
<script>
  let camPrev = document.getElementById("qr-video");
  const qrScanner = new QrScanner(
    camPrev,
    result => prtRes(result),
    {returnDetailedScanResult: false },
  );

  async function scanFile(){
    nFile = document.getElementById("scanFile").files[0];
    QrScanner.scanImage(nFile, { returnDetailedScanResult: false })
            .then(result => prtResFile(result))
            .catch(e => setResult(fileQrResult, { data: e || 'No QR code found.' }));
  };

  async function prtRes(res0){
    console.log('decoded qr code:', res0)
    document.getElementById("cam-qr-result").innerHTML = res0.data
  }
  async function prtResFile(res0){
    console.log('decoded qr code file:', res0)
    document.getElementById("file-qr-result").innerHTML = res0.data
  }

 
</script>


</script>
</body>
</html>